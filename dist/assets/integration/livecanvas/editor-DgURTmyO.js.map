{"version":3,"file":"editor-DgURTmyO.js","names":[],"sources":["../../../../resources/integration/livecanvas/components/IconPickerModal.jsx","../../../../resources/integration/livecanvas/editor-app.jsx","../../../../resources/integration/livecanvas/editor.ts"],"sourcesContent":["import { Modal, Spinner } from '@wordpress/components';\nimport { useState, useCallback, useMemo, useEffect, useRef } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport IconSearch from '~icons/tabler/search';\nimport IconX from '~icons/tabler/x';\nimport IconChevronLeft from '~icons/tabler/chevron-left';\nimport IconChevronRight from '~icons/tabler/chevron-right';\nimport IconRefresh from '~icons/tabler/refresh';\n\n// Import custom hooks from Gutenberg\nimport {\n\tuseDebounce,\n\tuseIconCollections,\n\tuseIconSearch,\n\tuseDefaultIcons,\n\tuseIconFiltering,\n\tuseKeyboardNavigation,\n} from '../../gutenberg/blocks/icon-block/components/hooks';\n\n// Import IconItem component from Gutenberg\nimport IconItem from '../../gutenberg/blocks/icon-block/components/IconItem';\n\nconst ICONS_PER_PAGE = 64;\n\n/**\n * Icon Picker Modal for LiveCanvas\n * Reuses the Gutenberg IconPickerModal component\n */\nconst IconPickerModal = ({ isOpen, onClose, onSelectIcon, currentIcon }) => {\n\t// Search state\n\tconst [searchQuery, setSearchQuery] = useState('');\n\tconst debouncedSearchQuery = useDebounce(searchQuery, 300);\n\t\n\t// Collection filter state\n\tconst [selectedCollection, setSelectedCollection] = useState('all');\n\t\n\t// Temporary selection state (before confirmation)\n\tconst [tempSelectedIcon, setTempSelectedIcon] = useState(currentIcon || null);\n\t\n\t// Ref for search input to manage focus\n\tconst searchInputRef = useRef(null);\n\t\n\t// Fetch collections\n\tconst { collections, isLoading: isLoadingCollections, isRefreshing, error: collectionsError, refreshCollections } = useIconCollections(isOpen);\n\t\n\t// Search icons or use default\n\tconst { icons: searchResults, isLoading: isSearching, error: searchError } = useIconSearch(debouncedSearchQuery, isOpen);\n\t\n\t// Generate default icons from collections\n\tconst defaultIcons = useDefaultIcons(collections, currentIcon);\n\t\n\t// Determine which icons to display (search results or default)\n\tconst allIcons = useMemo(() => {\n\t\treturn debouncedSearchQuery.trim() ? searchResults : defaultIcons;\n\t}, [debouncedSearchQuery, searchResults, defaultIcons]);\n\t\n\t// Filter and paginate icons\n\tconst {\n\t\tpaginatedIcons,\n\t\ttotalPages,\n\t\tcurrentPage,\n\t\tsetCurrentPage,\n\t\tcollectionCounts,\n\t} = useIconFiltering(allIcons, selectedCollection, ICONS_PER_PAGE);\n\t\n\t// Determine loading state - only show loading overlay on initial load, not on refresh\n\tconst isLoading = isLoadingCollections || isSearching;\n\tconst error = collectionsError || searchError;\n\t\n\t// Memoized callbacks\n\tconst handleSelectIcon = useCallback((iconName) => {\n\t\t// Toggle selection: if clicking the same icon, deselect it\n\t\tsetTempSelectedIcon(prevIcon => prevIcon === iconName ? null : iconName);\n\t}, []);\n\t\n\tconst handleConfirmSelection = useCallback(() => {\n\t\t// Allow confirming with null to clear the icon\n\t\tonSelectIcon(tempSelectedIcon || '');\n\t\tonClose();\n\t}, [tempSelectedIcon, onSelectIcon, onClose]);\n\t\n\tconst handleCancelSelection = useCallback(() => {\n\t\tonClose();\n\t}, [onClose]);\n\t\n\t// Keyboard navigation\n\tconst { selectedIndex, handleKeyDown: baseHandleKeyDown, gridRef } = useKeyboardNavigation(\n\t\tpaginatedIcons,\n\t\thandleSelectIcon,\n\t\thandleCancelSelection,\n\t\tisOpen\n\t);\n\t\n\t// Wrap keyboard handler to add Ctrl+Enter for confirm\n\tconst handleKeyDown = useCallback((event) => {\n\t\t// Ctrl/Cmd + Enter to confirm selection\n\t\tif ((event.ctrlKey || event.metaKey) && event.key === 'Enter') {\n\t\t\tevent.preventDefault();\n\t\t\thandleConfirmSelection();\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// Pass to base handler\n\t\tbaseHandleKeyDown(event);\n\t}, [baseHandleKeyDown, handleConfirmSelection]);\n\t\n\tconst handleClearSearch = useCallback(() => {\n\t\tsetSearchQuery('');\n\t}, []);\n\t\n\tconst handleCollectionFilter = useCallback((collectionPrefix) => {\n\t\tsetSelectedCollection(collectionPrefix);\n\t}, []);\n\t\n\tconst handlePageChange = useCallback((newPage) => {\n\t\tif (newPage < 1 || newPage > totalPages) return;\n\t\tsetCurrentPage(newPage);\n\t}, [totalPages, setCurrentPage]);\n\t\n\tconst handlePrevPage = useCallback(() => {\n\t\tif (currentPage > 1) {\n\t\t\thandlePageChange(currentPage - 1);\n\t\t}\n\t}, [currentPage, handlePageChange]);\n\t\n\tconst handleNextPage = useCallback(() => {\n\t\tif (currentPage < totalPages) {\n\t\t\thandlePageChange(currentPage + 1);\n\t\t}\n\t}, [currentPage, totalPages, handlePageChange]);\n\t\n\t// Calculate total count for current filter\n\tconst totalCount = useMemo(() => {\n\t\tif (selectedCollection === 'all') {\n\t\t\treturn allIcons.length;\n\t\t}\n\t\treturn allIcons.filter(icon => icon.prefix === selectedCollection).length;\n\t}, [allIcons, selectedCollection]);\n\t\n\t// Reset search when modal closes/opens\n\tuseEffect(() => {\n\t\tif (isOpen) {\n\t\t\tsetTempSelectedIcon(currentIcon || null);\n\t\t\t// Add body class to prevent scrolling\n\t\t\tdocument.body.classList.add('oilc-modal-open');\n\t\t\t// Focus search input after modal opens\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (searchInputRef.current) {\n\t\t\t\t\tsearchInputRef.current.focus();\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t} else {\n\t\t\t// Small delay before resetting to allow close animation\n\t\t\tconst timeout = setTimeout(() => {\n\t\t\t\tsetSearchQuery('');\n\t\t\t\tsetSelectedCollection('all');\n\t\t\t\tsetTempSelectedIcon(null);\n\t\t\t}, 200);\n\t\t\t// Remove body class to restore scrolling\n\t\t\tdocument.body.classList.remove('oilc-modal-open');\n\t\t\treturn () => clearTimeout(timeout);\n\t\t}\n\t}, [isOpen, currentIcon]);\n\t\n\t// Handle Escape key to close modal\n\tuseEffect(() => {\n\t\tconst handleEscape = (event) => {\n\t\t\tif (event.key === 'Escape' && isOpen) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tonClose();\n\t\t\t}\n\t\t};\n\n\t\tif (isOpen) {\n\t\t\tdocument.addEventListener('keydown', handleEscape, true);\n\t\t\treturn () => {\n\t\t\t\tdocument.removeEventListener('keydown', handleEscape, true);\n\t\t\t};\n\t\t}\n\t}, [isOpen, onClose]);\n\t\n\t// Info message\n\tconst infoMessage = useMemo(() => {\n\t\t// Show searching message when loading\n\t\tif (isLoading) {\n\t\t\tif (searchQuery) {\n\t\t\t\tconst collectionName = selectedCollection === 'all' \n\t\t\t\t\t? '' \n\t\t\t\t\t: ` in ${collections[selectedCollection]?.name || selectedCollection}`;\n\t\t\t\treturn __(`Searching for \"${searchQuery}\"${collectionName}...`, 'omni-icon');\n\t\t\t}\n\t\t\treturn __('Loading icons...', 'omni-icon');\n\t\t}\n\t\t\n\t\tif (debouncedSearchQuery) {\n\t\t\tconst collectionName = selectedCollection === 'all' \n\t\t\t\t? '' \n\t\t\t\t: ` in ${collections[selectedCollection]?.name || selectedCollection}`;\n\t\t\t\n\t\t\treturn totalCount > 0\n\t\t\t\t? __(`Found ${totalCount} icons for \"${debouncedSearchQuery}\"${collectionName}`, 'omni-icon')\n\t\t\t\t: __(`No icons found for \"${debouncedSearchQuery}\"${collectionName}`, 'omni-icon');\n\t\t}\n\t\t\n\t\treturn selectedCollection === 'all'\n\t\t\t? __('Showing sample icons from all collections', 'omni-icon')\n\t\t\t: __(`Showing sample icons from ${collections[selectedCollection]?.name || selectedCollection}`, 'omni-icon');\n\t}, [isLoading, searchQuery, debouncedSearchQuery, selectedCollection, totalCount, collections]);\n\n\treturn (\n\t\t<>\n\t\t\t{isOpen && (\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={__('Omni Icon â€” Icon Picker', 'omni-icon')}\n\t\t\t\t\tonRequestClose={onClose}\n\t\t\t\t\tclassName=\"oiib-icon-picker-modal oilc-icon-picker-modal\"\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\tonKeyDown={handleKeyDown}\n\t\t\t\t\taria-label={__('Icon Picker', 'omni-icon')}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"oiib-icon-picker-content\">\n\t\t\t\t\t\t{/* Search Bar */}\n\t\t\t\t\t\t<div className=\"oiib-icon-picker-search\">\n\t\t\t\t\t\t\t<div className=\"oiib-search-wrapper\">\n\t\t\t\t\t\t\t\t<IconSearch className=\"oiib-search-icon\" aria-hidden=\"true\" />\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tref={searchInputRef}\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tclassName=\"oiib-search-input\"\n\t\t\t\t\t\t\t\t\tvalue={searchQuery}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setSearchQuery(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={__('Search icons... (e.g., home, mdi:heart, lucide:star)', 'omni-icon')}\n\t\t\t\t\t\t\t\t\taria-label={__('Search icons', 'omni-icon')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{searchQuery && (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"oiib-search-clear\"\n\t\t\t\t\t\t\t\t\t\tonClick={handleClearSearch}\n\t\t\t\t\t\t\t\t\t\taria-label={__('Clear search', 'omni-icon')}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<IconX />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"oiib-search-refresh\"\n\t\t\t\t\t\t\t\tonClick={refreshCollections}\n\t\t\t\t\t\t\t\tdisabled={isRefreshing}\n\t\t\t\t\t\t\t\taria-label={__('Refresh icon collections', 'omni-icon')}\n\t\t\t\t\t\t\t\ttitle={__('Refresh icon collections', 'omni-icon')}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<IconRefresh className={isRefreshing ? 'is-spinning' : ''} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{/* Collection Filter */}\n\t\t\t\t\t\t{Object.keys(collections).length > 0 && (\n\t\t\t\t\t\t\t<div className=\"oiib-collection-filter\" role=\"tablist\" aria-label={__('Filter by collection', 'omni-icon')}>\n\t\t\t\t\t\t\t\t<div className=\"oiib-collection-filter-wrapper\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName={`oiib-collection-chip ${selectedCollection === 'all' ? 'is-active' : ''}`}\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleCollectionFilter('all')}\n\t\t\t\t\t\t\t\t\t\trole=\"tab\"\n\t\t\t\t\t\t\t\t\t\taria-selected={selectedCollection === 'all'}\n\t\t\t\t\t\t\t\t\t\taria-label={__('All collections', 'omni-icon')}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{__('All', 'omni-icon')}\n\t\t\t\t\t\t\t\t\t\t<span className=\"oiib-collection-count\" aria-label={`${allIcons.length} icons`}>\n\t\t\t\t\t\t\t\t\t\t\t{allIcons.length}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t{Object.entries(collections).map(([prefix, collection]) => {\n\t\t\t\t\t\t\t\t\t\tconst count = collectionCounts[prefix] || 0;\n\t\t\t\t\t\t\t\t\t\t// Hide collections with 0 results when searching\n\t\t\t\t\t\t\t\t\t\tif (debouncedSearchQuery && count === 0) {\n\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tkey={prefix}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={`oiib-collection-chip ${selectedCollection === prefix ? 'is-active' : ''}`}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleCollectionFilter(prefix)}\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={collection.name}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-count={count}\n\t\t\t\t\t\t\t\t\t\t\t\trole=\"tab\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-selected={selectedCollection === prefix}\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={`${collection.name || prefix}, ${count} icons`}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{collection.name || prefix}\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"oiib-collection-count\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{count}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Results Info with Pagination */}\n\t\t\t\t\t<div className=\"oiib-icon-picker-info\">\n\t\t\t\t\t\t<div className=\"oiib-info-text\">\n\t\t\t\t\t\t\t<p>{infoMessage}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t{/* Pagination Controls */}\n\t\t\t\t\t\t{!isLoading && debouncedSearchQuery && totalPages > 1 && (\n\t\t\t\t\t\t\t<div className=\"oiib-pagination\" role=\"navigation\" aria-label={__('Icon pagination', 'omni-icon')}>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"oiib-pagination-btn\"\n\t\t\t\t\t\t\t\t\tonClick={handlePrevPage}\n\t\t\t\t\t\t\t\t\tdisabled={currentPage === 1}\n\t\t\t\t\t\t\t\t\taria-label={__('Previous page', 'omni-icon')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<IconChevronLeft />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<span className=\"oiib-pagination-info\" aria-live=\"polite\">\n\t\t\t\t\t\t\t\t\t{__(`Page ${currentPage} of ${totalPages}`, 'omni-icon')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName=\"oiib-pagination-btn\"\n\t\t\t\t\t\t\t\t\tonClick={handleNextPage}\n\t\t\t\t\t\t\t\t\tdisabled={currentPage === totalPages}\n\t\t\t\t\t\t\t\t\taria-label={__('Next page', 'omni-icon')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<IconChevronRight />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Content Wrapper - prevents blinking on state changes */}\n\t\t\t\t\t<div className=\"oiib-icon-picker-content-wrapper\">\n\t\t\t\t\t\t{/* Loading State */}\n\t\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t\t<div className=\"oiib-icon-picker-loading\" role=\"status\" aria-live=\"polite\">\n\t\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t\t\t<p>{__('Loading icons...', 'omni-icon')}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{/* Error State */}\n\t\t\t\t\t\t{error && (\n\t\t\t\t\t\t\t<div className=\"oiib-icon-picker-error\" role=\"alert\">\n\t\t\t\t\t\t\t\t<p>{error}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{/* Icon Grid */}\n\t\t\t\t\t\t{!isLoading && !error && paginatedIcons.length > 0 && (\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclassName=\"oiib-icon-picker-grid\" \n\t\t\t\t\t\t\t\tref={gridRef}\n\t\t\t\t\t\t\t\trole=\"grid\"\n\t\t\t\t\t\t\t\taria-label={__('Icon grid', 'omni-icon')}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{paginatedIcons.map((icon, index) => (\n\t\t\t\t\t\t\t\t\t<IconItem\n\t\t\t\t\t\t\t\t\t\tkey={icon.name}\n\t\t\t\t\t\t\t\t\t\ticon={icon}\n\t\t\t\t\t\t\t\t\t\tisSelected={icon.name === tempSelectedIcon}\n\t\t\t\t\t\t\t\t\t\tisFocused={index === selectedIndex}\n\t\t\t\t\t\t\t\t\t\tonSelect={handleSelectIcon}\n\t\t\t\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{/* Empty State */}\n\t\t\t\t\t\t{!isLoading && !error && paginatedIcons.length === 0 && debouncedSearchQuery && (\n\t\t\t\t\t\t\t<div className=\"oiib-icon-picker-empty\" role=\"status\">\n\t\t\t\t\t\t\t\t<IconSearch style={{ width: '48px', height: '48px' }} aria-hidden=\"true\" />\n\t\t\t\t\t\t\t\t<h3>{__('No icons found', 'omni-icon')}</h3>\n\t\t\t\t\t\t\t\t<p>{__('Try a different search term or icon prefix', 'omni-icon')}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Confirmation Footer */}\n\t\t\t\t\t{tempSelectedIcon !== currentIcon && (tempSelectedIcon || currentIcon) && (\n\t\t\t\t\t\t<div className=\"oiib-icon-picker-footer\">\n\t\t\t\t\t\t\t<div className=\"oiib-selected-icon-preview\">\n\t\t\t\t\t\t\t\t{tempSelectedIcon ? (\n\t\t\t\t\t\t\t\t\t<div className=\"oiib-selected-icon-display\">\n\t\t\t\t\t\t\t\t\t\t<omni-icon\n\t\t\t\t\t\t\t\t\t\t\tname={tempSelectedIcon}\n\t\t\t\t\t\t\t\t\t\t\twidth=\"32\"\n\t\t\t\t\t\t\t\t\t\t\theight=\"32\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<div className=\"oiib-selected-icon-info\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"oiib-selected-icon-label\">{__('Selected:', 'omni-icon')}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"oiib-selected-icon-name\">{tempSelectedIcon}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<div className=\"oiib-selected-icon-display\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"oiib-selected-icon-info\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"oiib-selected-icon-label\">{__('Icon will be removed', 'omni-icon')}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<div className=\"oiib-confirmation-buttons\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"oiib-btn oiib-btn-secondary\"\n\t\t\t\t\t\t\t\t\t\tonClick={handleCancelSelection}\n\t\t\t\t\t\t\t\t\t\taria-label={__('Cancel', 'omni-icon')}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{__('Cancel', 'omni-icon')}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"oiib-btn oiib-btn-primary\"\n\t\t\t\t\t\t\t\t\t\tonClick={handleConfirmSelection}\n\t\t\t\t\t\t\t\t\t\taria-label={__('Confirm selection', 'omni-icon')}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{__('Confirm', 'omni-icon')}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t</Modal>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default IconPickerModal;\n","/**\n * Omni Icon Picker React App for LiveCanvas\n * \n * This file handles the React rendering of the icon picker modal.\n */\nimport { createRoot } from '@wordpress/element';\nimport { useState, useEffect } from '@wordpress/element';\nimport IconPickerModal from './components/IconPickerModal';\n\n// Global state for icon picker\nlet modalContainer = null;\nlet modalRoot = null;\nlet updateModalState = null;\n\n/**\n * Modal State Manager Component\n * This component manages the modal state and passes it to the IconPickerModal\n */\nfunction ModalStateManager() {\n\tconst [modalState, setModalState] = useState({\n\t\tisOpen: false,\n\t\tcurrentIcon: '',\n\t\tcallback: null,\n\t});\n\n\t// Expose state updater globally\n\tuseEffect(() => {\n\t\tupdateModalState = setModalState;\n\t\treturn () => {\n\t\t\tupdateModalState = null;\n\t\t};\n\t}, []);\n\n\tconst handleClose = () => {\n\t\tsetModalState(prev => ({\n\t\t\t...prev,\n\t\t\tisOpen: false,\n\t\t}));\n\t};\n\n\tconst handleSelectIcon = (iconName) => {\n\t\tif (modalState.callback) {\n\t\t\tmodalState.callback(iconName);\n\t\t}\n\t\thandleClose();\n\t};\n\n\treturn (\n\t\t<IconPickerModal\n\t\t\tisOpen={modalState.isOpen}\n\t\t\tonClose={handleClose}\n\t\t\tonSelectIcon={handleSelectIcon}\n\t\t\tcurrentIcon={modalState.currentIcon}\n\t\t/>\n\t);\n}\n\n/**\n * Open the icon picker modal\n */\nfunction openIconPicker(initialValue, callback) {\n\n\tif (updateModalState) {\n\t\tupdateModalState({\n\t\t\tisOpen: true,\n\t\t\tcurrentIcon: initialValue || '',\n\t\t\tcallback: callback,\n\t\t});\n\t} else {\n\t\tconsole.error('[Omni Icon] Modal state manager not initialized');\n\t}\n}\n\n/**\n * Close the icon picker modal\n */\nfunction closeIconPicker() {\n\tif (updateModalState) {\n\t\tupdateModalState(prev => ({\n\t\t\t...prev,\n\t\t\tisOpen: false,\n\t\t}));\n\t}\n}\n\n/**\n * Initialize and render the React modal\n */\nfunction renderModal() {\n\tif (!modalContainer) {\n\t\tmodalContainer = document.createElement('div');\n\t\tmodalContainer.id = 'oilc-icon-picker-root';\n\t\tdocument.body.appendChild(modalContainer);\n\t}\n\n\t// Create root only once\n\tif (!modalRoot) {\n\t\tmodalRoot = createRoot(modalContainer);\n\t}\n\n\t// Render the state manager component\n\tmodalRoot.render(<ModalStateManager />);\n}\n\n/**\n * Cleanup function to unmount the modal\n */\nfunction destroyModal() {\n\tif (modalRoot) {\n\t\tmodalRoot.unmount();\n\t\tmodalRoot = null;\n\t}\n\tif (modalContainer && modalContainer.parentNode) {\n\t\tmodalContainer.parentNode.removeChild(modalContainer);\n\t\tmodalContainer = null;\n\t}\n\tupdateModalState = null;\n}\n\n// Export the API\nexport { openIconPicker, closeIconPicker, renderModal, destroyModal };\n","/**\n * Omni Icon Picker Integration for LiveCanvas\n * \n * Main entry point that initializes the icon picker integration for LiveCanvas editor.\n */\nimport { openIconPicker, closeIconPicker, renderModal } from './editor-app';\nimport './editor.scss';\n\n\n(async () => {\n\t// Wait for DOM to be ready\n\tif (document.readyState === 'loading') {\n\t\tawait new Promise(resolve => {\n\t\t\tdocument.addEventListener('DOMContentLoaded', resolve);\n\t\t});\n\t}\n\n\n\t// Initialize modal container\n\trenderModal();\n\n\t// Expose API to window for LiveCanvas panel to use\n\t(window as any).omniIconPicker = {\n\t\topen: (initialValue?: string, callback?: (iconName: string) => void) => {\n\t\t\topenIconPicker(initialValue || '', callback);\n\t\t},\n\t\tclose: closeIconPicker,\n\t};\n\n})();\n"],"mappings":"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"}