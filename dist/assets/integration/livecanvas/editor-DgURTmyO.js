import{i as e,n as t,r as n}from"../../check-qjydXzqM.js";import{a as r,c as i,i as a,l as o,n as s,o as ee,r as c,s as l,t as u}from"../../IconItem-BVMBjRxz.js";var d=64,f=({isOpen:f,onClose:p,onSelectIcon:m,currentIcon:h})=>{let[g,_]=wp.element.useState(``),v=s(g,300),[y,b]=wp.element.useState(`all`),[x,S]=wp.element.useState(h||null),C=wp.element.useRef(null),{collections:w,isLoading:T,isRefreshing:E,error:D,refreshCollections:O}=a(f),{icons:k,isLoading:A,error:j}=ee(v,f),M=c(w,h),N=wp.element.useMemo(()=>v.trim()?k:M,[v,k,M]),{paginatedIcons:P,totalPages:F,currentPage:I,setCurrentPage:L,collectionCounts:R}=r(N,y,d),z=T||A,B=D||j,V=wp.element.useCallback(e=>{S(t=>t===e?null:e)},[]),H=wp.element.useCallback(()=>{m(x||``),p()},[x,m,p]),U=wp.element.useCallback(()=>{p()},[p]),{selectedIndex:W,handleKeyDown:G,gridRef:K}=l(P,V,U,f),q=wp.element.useCallback(e=>{if((e.ctrlKey||e.metaKey)&&e.key===`Enter`){e.preventDefault(),H();return}G(e)},[G,H]),J=wp.element.useCallback(()=>{_(``)},[]),Y=wp.element.useCallback(e=>{b(e)},[]),X=wp.element.useCallback(e=>{e<1||e>F||L(e)},[F,L]),Z=wp.element.useCallback(()=>{I>1&&X(I-1)},[I,X]),Q=wp.element.useCallback(()=>{I<F&&X(I+1)},[I,F,X]),$=wp.element.useMemo(()=>y===`all`?N.length:N.filter(e=>e.prefix===y).length,[N,y]);wp.element.useEffect(()=>{if(f)S(h||null),document.body.classList.add(`oilc-modal-open`),setTimeout(()=>{C.current&&C.current.focus()},100);else{let e=setTimeout(()=>{_(``),b(`all`),S(null)},200);return document.body.classList.remove(`oilc-modal-open`),()=>clearTimeout(e)}},[f,h]),wp.element.useEffect(()=>{let e=e=>{e.key===`Escape`&&f&&(e.preventDefault(),e.stopPropagation(),p())};if(f)return document.addEventListener(`keydown`,e,!0),()=>{document.removeEventListener(`keydown`,e,!0)}},[f,p]);let te=wp.element.useMemo(()=>{if(z){if(g){let e=y===`all`?``:` in ${w[y]?.name||y}`;return wp.i18n.__(`Searching for "${g}"${e}...`,`omni-icon`)}return wp.i18n.__(`Loading icons...`,`omni-icon`)}if(v){let e=y===`all`?``:` in ${w[y]?.name||y}`;return $>0?wp.i18n.__(`Found ${$} icons for "${v}"${e}`,`omni-icon`):wp.i18n.__(`No icons found for "${v}"${e}`,`omni-icon`)}return y===`all`?wp.i18n.__(`Showing sample icons from all collections`,`omni-icon`):wp.i18n.__(`Showing sample icons from ${w[y]?.name||y}`,`omni-icon`)},[z,g,v,y,$,w]);return ReactJSXRuntime.jsx(ReactJSXRuntime.Fragment,{children:f&&ReactJSXRuntime.jsx(wp.components.Modal,{title:wp.i18n.__(`Omni Icon â€” Icon Picker`,`omni-icon`),onRequestClose:p,className:`oiib-icon-picker-modal oilc-icon-picker-modal`,size:`large`,onKeyDown:q,"aria-label":wp.i18n.__(`Icon Picker`,`omni-icon`),children:ReactJSXRuntime.jsxs(`div`,{className:`oiib-icon-picker-content`,children:[ReactJSXRuntime.jsxs(`div`,{className:`oiib-icon-picker-search`,children:[ReactJSXRuntime.jsxs(`div`,{className:`oiib-search-wrapper`,children:[ReactJSXRuntime.jsx(n,{className:`oiib-search-icon`,"aria-hidden":`true`}),ReactJSXRuntime.jsx(`input`,{ref:C,type:`text`,className:`oiib-search-input`,value:g,onChange:e=>_(e.target.value),placeholder:wp.i18n.__(`Search icons... (e.g., home, mdi:heart, lucide:star)`,`omni-icon`),"aria-label":wp.i18n.__(`Search icons`,`omni-icon`)}),g&&ReactJSXRuntime.jsx(`button`,{className:`oiib-search-clear`,onClick:J,"aria-label":wp.i18n.__(`Clear search`,`omni-icon`),children:ReactJSXRuntime.jsx(e,{})})]}),ReactJSXRuntime.jsx(`button`,{className:`oiib-search-refresh`,onClick:O,disabled:E,"aria-label":wp.i18n.__(`Refresh icon collections`,`omni-icon`),title:wp.i18n.__(`Refresh icon collections`,`omni-icon`),children:ReactJSXRuntime.jsx(t,{className:E?`is-spinning`:``})})]}),Object.keys(w).length>0&&ReactJSXRuntime.jsx(`div`,{className:`oiib-collection-filter`,role:`tablist`,"aria-label":wp.i18n.__(`Filter by collection`,`omni-icon`),children:ReactJSXRuntime.jsxs(`div`,{className:`oiib-collection-filter-wrapper`,children:[ReactJSXRuntime.jsxs(`button`,{className:`oiib-collection-chip ${y===`all`?`is-active`:``}`,onClick:()=>Y(`all`),role:`tab`,"aria-selected":y===`all`,"aria-label":wp.i18n.__(`All collections`,`omni-icon`),children:[wp.i18n.__(`All`,`omni-icon`),ReactJSXRuntime.jsx(`span`,{className:`oiib-collection-count`,"aria-label":`${N.length} icons`,children:N.length})]}),Object.entries(w).map(([e,t])=>{let n=R[e]||0;return v&&n===0?null:ReactJSXRuntime.jsxs(`button`,{className:`oiib-collection-chip ${y===e?`is-active`:``}`,onClick:()=>Y(e),title:t.name,"data-count":n,role:`tab`,"aria-selected":y===e,"aria-label":`${t.name||e}, ${n} icons`,children:[t.name||e,ReactJSXRuntime.jsx(`span`,{className:`oiib-collection-count`,children:n})]},e)})]})}),ReactJSXRuntime.jsxs(`div`,{className:`oiib-icon-picker-info`,children:[ReactJSXRuntime.jsx(`div`,{className:`oiib-info-text`,children:ReactJSXRuntime.jsx(`p`,{children:te})}),!z&&v&&F>1&&ReactJSXRuntime.jsxs(`div`,{className:`oiib-pagination`,role:`navigation`,"aria-label":wp.i18n.__(`Icon pagination`,`omni-icon`),children:[ReactJSXRuntime.jsx(`button`,{className:`oiib-pagination-btn`,onClick:Z,disabled:I===1,"aria-label":wp.i18n.__(`Previous page`,`omni-icon`),children:ReactJSXRuntime.jsx(o,{})}),ReactJSXRuntime.jsx(`span`,{className:`oiib-pagination-info`,"aria-live":`polite`,children:wp.i18n.__(`Page ${I} of ${F}`,`omni-icon`)}),ReactJSXRuntime.jsx(`button`,{className:`oiib-pagination-btn`,onClick:Q,disabled:I===F,"aria-label":wp.i18n.__(`Next page`,`omni-icon`),children:ReactJSXRuntime.jsx(i,{})})]})]}),ReactJSXRuntime.jsxs(`div`,{className:`oiib-icon-picker-content-wrapper`,children:[z&&ReactJSXRuntime.jsxs(`div`,{className:`oiib-icon-picker-loading`,role:`status`,"aria-live":`polite`,children:[ReactJSXRuntime.jsx(wp.components.Spinner,{}),ReactJSXRuntime.jsx(`p`,{children:wp.i18n.__(`Loading icons...`,`omni-icon`)})]}),B&&ReactJSXRuntime.jsx(`div`,{className:`oiib-icon-picker-error`,role:`alert`,children:ReactJSXRuntime.jsx(`p`,{children:B})}),!z&&!B&&P.length>0&&ReactJSXRuntime.jsx(`div`,{className:`oiib-icon-picker-grid`,ref:K,role:`grid`,"aria-label":wp.i18n.__(`Icon grid`,`omni-icon`),children:P.map((e,t)=>ReactJSXRuntime.jsx(u,{icon:e,isSelected:e.name===x,isFocused:t===W,onSelect:V,index:t},e.name))}),!z&&!B&&P.length===0&&v&&ReactJSXRuntime.jsxs(`div`,{className:`oiib-icon-picker-empty`,role:`status`,children:[ReactJSXRuntime.jsx(n,{style:{width:`48px`,height:`48px`},"aria-hidden":`true`}),ReactJSXRuntime.jsx(`h3`,{children:wp.i18n.__(`No icons found`,`omni-icon`)}),ReactJSXRuntime.jsx(`p`,{children:wp.i18n.__(`Try a different search term or icon prefix`,`omni-icon`)})]})]}),x!==h&&(x||h)&&ReactJSXRuntime.jsx(`div`,{className:`oiib-icon-picker-footer`,children:ReactJSXRuntime.jsxs(`div`,{className:`oiib-selected-icon-preview`,children:[x?ReactJSXRuntime.jsxs(`div`,{className:`oiib-selected-icon-display`,children:[ReactJSXRuntime.jsx(`omni-icon`,{name:x,width:`32`,height:`32`}),ReactJSXRuntime.jsxs(`div`,{className:`oiib-selected-icon-info`,children:[ReactJSXRuntime.jsx(`span`,{className:`oiib-selected-icon-label`,children:wp.i18n.__(`Selected:`,`omni-icon`)}),ReactJSXRuntime.jsx(`span`,{className:`oiib-selected-icon-name`,children:x})]})]}):ReactJSXRuntime.jsx(`div`,{className:`oiib-selected-icon-display`,children:ReactJSXRuntime.jsx(`div`,{className:`oiib-selected-icon-info`,children:ReactJSXRuntime.jsx(`span`,{className:`oiib-selected-icon-label`,children:wp.i18n.__(`Icon will be removed`,`omni-icon`)})})}),ReactJSXRuntime.jsxs(`div`,{className:`oiib-confirmation-buttons`,children:[ReactJSXRuntime.jsx(`button`,{className:`oiib-btn oiib-btn-secondary`,onClick:U,"aria-label":wp.i18n.__(`Cancel`,`omni-icon`),children:wp.i18n.__(`Cancel`,`omni-icon`)}),ReactJSXRuntime.jsx(`button`,{className:`oiib-btn oiib-btn-primary`,onClick:H,"aria-label":wp.i18n.__(`Confirm selection`,`omni-icon`),children:wp.i18n.__(`Confirm`,`omni-icon`)})]})]})})]})})})},p=null,m=null,h=null;function g(){let[e,t]=wp.element.useState({isOpen:!1,currentIcon:``,callback:null});wp.element.useEffect(()=>(h=t,()=>{h=null}),[]);let n=()=>{t(e=>({...e,isOpen:!1}))};return ReactJSXRuntime.jsx(f,{isOpen:e.isOpen,onClose:n,onSelectIcon:t=>{e.callback&&e.callback(t),n()},currentIcon:e.currentIcon})}function _(e,t){h?h({isOpen:!0,currentIcon:e||``,callback:t}):console.error(`[Omni Icon] Modal state manager not initialized`)}function v(){h&&h(e=>({...e,isOpen:!1}))}function y(){p||(p=document.createElement(`div`),p.id=`oilc-icon-picker-root`,document.body.appendChild(p)),m||=wp.element.createRoot(p),m.render(ReactJSXRuntime.jsx(g,{}))}(async()=>{document.readyState===`loading`&&await new Promise(e=>{document.addEventListener(`DOMContentLoaded`,e)}),y(),window.omniIconPicker={open:(e,t)=>{_(e||``,t)},close:v}})();
//# sourceMappingURL=editor-DgURTmyO.js.map